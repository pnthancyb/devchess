import React, { createContext, useContext, useState, useEffect, ReactNode } from "react";

export const languages = {
  en: "English",
  ku: "Kurdî", // Kurdish in Latin letters as requested
  fr: "Français",
  es: "Español",
  de: "Deutsch",
  tr: "Türkçe",
};

// Removed flags as requested by user

export type Language = keyof typeof languages;

const translations = {
  en: {
    "chess.groq.coach": "Chess Groq Coach",
    "ai.powered.training": "AI-Powered Training",
    "game.mode": "Game Mode",
    "classic.vs": "Classic VS",
    "feedback": "Feedback",
    "scoring": "Scoring",
    "coach.mode": "Coach Mode",
    "opening.learning": "Opening Learning",
    "game.active": "Game Active",
    "move": "Move",
    "reset.game": "Reset Game",
    "download.pgn": "Download PGN",
    "you": "You",
    "groq.ai": "Groq AI",
    "white": "White",
    "black": "Black",
    "ai.analysis": "AI Analysis",
    "chess.coach": "Chess Coach",
    "move.history": "Move History",
    "games.played": "Games Played",
    "win.rate": "Win Rate",
    "average.rating": "Average Rating",
    "last.move.analysis": "Last Move Analysis",
    "move.score": "Move Score",
    "ask.coach": "Ask your coach...",
    "ai.thinking": "AI is thinking...",
    "settings.title": "Settings",
    "settings.aiModel": "AI Model",
    "settings.selectModel": "Select AI Model",
    "settings.currentModel": "Current Model",
    "settings.difficulty": "Difficulty",
    "settings.difficultyLevel": "Difficulty Level",
    "settings.currentDifficulty": "Current Difficulty",
    "settings.beginner": "Beginner",
    "settings.easy": "Easy",
    "settings.medium": "Medium", 
    "settings.hard": "Hard",
    "settings.expert": "Expert",
    "settings.beginnerDesc": "Perfect for learning chess basics and piece movement",
    "settings.mediumDesc": "Balanced gameplay with moderate tactical challenges",
    "settings.expertDesc": "Advanced strategic play with deep position analysis",
    "settings.recommendations": "Model Recommendations",
    "settings.recommendedFor": "Levels",
    "settings.recommendedFor": "Levels",
    "settings.recommended": "Recommended",
    "common.white": "White",
    "common.black": "Black",
    "game.wins": "Wins",
    "game.draw": "Draw",
    "game.gameOver": "Game Over",
    "game.check": "Check",
    "game.aiThinking": "AI is thinking",
    "game.reset": "Reset Game",
    "game.flipBoard": "Flip Board",
    "game.exportPGN": "Export PGN",
    "game.turn": "Turn",
    "game.difficulty": "Difficulty",
    coach: {
      welcome: "💡 Welcome! I'm your AI chess coach. I analyze positions live and provide tips based on your current game situation.",
      opening: {
        advice: "Focus on controlling center squares, develop knights before bishops, castle early for king safety."
      },
      tactics: {
        advice: "Look for tactical patterns in your current position: pins, forks, skewers, and discovered attacks."
      },
      endgame: {
        advice: "Activate your king, push passed pawns, and centralize pieces. King activity becomes crucial."
      },
      position: {
        advice: "Check king safety, piece activity, center control, and pawn structure in this position."
      },
      mistake: {
        advice: "Before each move ask: Is my king safe? Are pieces defended? Does this improve my position?"
      },
      improve: {
        advice: "Study similar positions, practice tactics daily, analyze your games, and focus on one aspect at a time."
      },
      default: {
        1: "💡 TIP: Every move should have a purpose in this position.",
        2: "💡 TIP: Consider the three phases: opening, middlegame, endgame strategies.",
        3: "💡 TIP: Look for forcing moves first - checks, captures, threats.",
        4: "💡 TIP: Pattern recognition improves with practice and analysis.",
        5: "💡 TIP: Create and exploit weaknesses in the current position."
      },
      chat: {
        title: "AI Chess Coach",
        subtitle: "Live position analysis • Tips • Move explanations",
        placeholder: "Ask about this position, tactics, or why you should make a move...",
        help: "💡 Get live tips • Press Enter to send • Ask 'Why should I move here?'"
      }
    },
    "coach.chat.title": "AI Coach Chat",
    "coach.chat.subtitle": "Get personalized chess guidance and analysis",
    "coach.chat.placeholder": "Ask about tactics, strategy, this position...",
    "coach.chat.help": "Press Enter to send • Ask about the current position or general chess advice",
  },
  ku: {
    "chess.groq.coach": "Mamostay Shetrencî Groq",
    "ai.powered.training": "Rahenani bi Hoshi Destkird",
    "game.mode": "Shewazi Yari",
    "classic.vs": "Klasiki",
    "feedback": "Rexne",
    "scoring": "Xal",
    "coach.mode": "Shewazi Mamosta",
    "opening.learning": "Ferbuni Destpek",
    "game.active": "Yari Chalak",
    "move": "Jule",
    "reset.game": "Dubare Destpekirdnewe",
    "download.pgn": "Dagirtini PGN",
    "you": "To",
    "groq.ai": "Groq AI",
    "white": "Spi",
    "black": "Resh",
    "ai.analysis": "Shikirdnewey AI",
    "chess.coach": "Mamostay Shetrenc",
    "move.history": "Mejuy Julekan",
    "games.played": "Yarikirawekan",
    "win.rate": "Rejey Birdnewe",
    "average.rating": "Nirxandini Nawend",
    "last.move.analysis": "Shikirdnewey Dwayin Jule",
    "move.score": "Xali Jule",
    "ask.coach": "Pirsiyar le mamostaket bike...",
    "ai.thinking": "AI birdekatewe...",
    "settings.title": "Mihengkirin",
    "settings.aiModel": "Modela AI",
    "settings.selectModel": "Modela AI Hilbijere",
    "settings.currentModel": "Modela Niha",
    "settings.difficulty": "Aste Dijwari",
    "settings.difficultyLevel": "Asta Dijwari",
    "settings.currentDifficulty": "Dijwariya Niha",
    "settings.beginner": "Destpeker",
    "settings.easy": "Hesan",
    "settings.medium": "Nawin",
    "settings.hard": "Dijwar",
    "settings.expert": "Pispor",
    "settings.beginnerDesc": "Ji bo ferbuна bingehin a shetrencê û tevgeren perçeyan",
    "settings.mediumDesc": "Yariya hevseng bi dijwariyen taktikal en nawin",
    "settings.expertDesc": "Yariya stratejikal a peshketi bi analiza kur a pozisyone",
    "settings.recommendations": "Peshniyaren Model",
    "settings.recommendedFor": "Ast",
    "settings.recommended": "Peshniyarkirin",
    "common.white": "Spi",
    "common.black": "Resh",
    "game.wins": "Berdewam",
    "game.draw": "Beraber",
    "game.gameOver": "Yari Temam",
    "game.check": "Shah",
    "game.aiThinking": "AI birdekatewe",
    "game.reset": "Dubare Destpekirdnewe",
    "game.flipBoard": "Daxe Zirav bike",
    "game.exportPGN": "PGN Derxe",
    "game.turn": "Nobe",
    "game.difficulty": "Dijwari",
    "coach.welcome": "سڵاو! من ڕاهێنەری شەترەنجی AIم. دەتوانم یارمەتیت بدەم بۆ شیکردنەوەی جێگەکان، پێشنیاری جووڵە، ڕوونکردنەوەی تەکنیکەکان، و وەڵامدانەوەی هەر پرسیارێکی شەترەنج. چیت دەوێت کاری لەسەر بکەیت؟",
    "coach.chat.title": "گفتوگۆی ڕاهێنەری AI",
    "coach.chat.subtitle": "ڕێنمایی و شیکردنەوەی تایبەتی شەترەنج وەربگرە",
    "coach.chat.placeholder": "پرسیار لەسەر تەکنیک، ستراتیژی، ئەم جێگایە...",
    "coach.chat.help": "Enter دابگرە بۆ ناردن • پرسیار لە جێگای ئێستا یان ڕاوێژی گشتی شەترەنج بکە",
  },
  fr: {
    "chess.groq.coach": "Entraîneur d'Échecs Groq",
    "ai.powered.training": "Formation Alimentée par l'IA",
    "game.mode": "Mode de Jeu",
    "classic.vs": "Classique VS",
    "feedback": "Commentaires",
    "scoring": "Notation",
    "coach.mode": "Mode Entraîneur",
    "game.active": "Jeu Actif",
    "move": "Coup",
    "reset.game": "Réinitialiser le Jeu",
    "download.pgn": "Télécharger PGN",
    "you": "Vous",
    "groq.ai": "Groq IA",
    "white": "Blanc",
    "black": "Noir",
    "ai.analysis": "Analyse IA",
    "chess.coach": "Entraîneur d'Échecs",
    "move.history": "Historique des Coups",
    "games.played": "Parties Jouées",
    "win.rate": "Taux de Victoire",
    "average.rating": "Classement Moyen",
    "last.move.analysis": "Analyse du Dernier Coup",
    "move.score": "Score du Coup",
    "ask.coach": "Demandez à votre entraîneur...",
    "ai.thinking": "L'IA réfléchit...",
    "settings.title": "Settings",
    "settings.aiModel": "AI Model",
    "settings.selectModel": "Select AI Model",
    "settings.currentModel": "Current Model",
    "settings.difficulty": "Difficulty",
    "settings.difficultyLevel": "Difficulty Level",
    "settings.currentDifficulty": "Current Difficulty",
    "settings.beginner": "Beginner",
    "settings.easy": "Easy",
    "settings.medium": "Medium", 
    "settings.hard": "Hard",
    "settings.expert": "Expert",
    "settings.beginnerDesc": "Perfect for learning chess basics and piece movement",
    "settings.mediumDesc": "Balanced gameplay with moderate tactical challenges",
    "settings.expertDesc": "Advanced strategic play with deep position analysis",
    "settings.recommendations": "Model Recommendations",
    "settings.recommendedFor": "Levels",
    "settings.recommended": "Recommended",
    "common.white": "White",
    "common.black": "Black",
    "game.wins": "Wins",
    "game.draw": "Draw",
    "game.gameOver": "Game Over",
    "game.check": "Check",
    "game.aiThinking": "AI is thinking",
    "game.reset": "Reset Game",
    "game.flipBoard": "Flip Board",
    "game.exportPGN": "Export PGN",
    "game.turn": "Turn",
    "game.difficulty": "Difficulty",
    "coach.welcome": "Salut ! Je suis votre entraîneur d'échecs IA. Je peux vous aider à analyser les positions, suggérer des coups, expliquer les tactiques et répondre à toutes vos questions d'échecs. Sur quoi aimeriez-vous travailler ?",
    "coach.chat.title": "Chat Entraîneur IA",
    "coach.chat.subtitle": "Obtenez des conseils et analyses d'échecs personnalisés",
    "coach.chat.placeholder": "Demandez sur les tactiques, la stratégie, cette position...",
    "coach.chat.help": "Appuyez sur Entrée pour envoyer • Demandez sur la position actuelle ou des conseils généraux d'échecs",
  },
  es: {
    "chess.groq.coach": "Entrenador de Ajedrez Groq",
    "ai.powered.training": "Entrenamiento Impulsado por IA",
    "game.mode": "Modo de Juego",
    "classic.vs": "Clásico VS",
    "feedback": "Comentarios",
    "scoring": "Puntuación",
    "coach.mode": "Modo Entrenador",
    "game.active": "Juego Activo",
    "move": "Movimiento",
    "reset.game": "Reiniciar Juego",
    "download.pgn": "Descargar PGN",
    "you": "Tú",
    "groq.ai": "Groq IA",
    "white": "Blanco",
    "black": "Negro",
    "ai.analysis": "Análisis IA",
    "chess.coach": "Entrenador de Ajedrez",
    "move.history": "Historial de Movimientos",
    "games.played": "Partidas Jugadas",
    "win.rate": "Tasa de Victoria",
    "average.rating": "Puntuación Promedio",
    "last.move.analysis": "Análisis del Último Movimiento",
    "move.score": "Puntuación del Movimiento",
    "ask.coach": "Pregunta a tu entrenador...",
    "ai.thinking": "La IA está pensando...",
    "settings.title": "Settings",
    "settings.aiModel": "AI Model",
    "settings.selectModel": "Select AI Model",
    "settings.currentModel": "Current Model",
    "settings.difficulty": "Difficulty",
    "settings.difficultyLevel": "Difficulty Level",
    "settings.currentDifficulty": "Current Difficulty",
    "settings.beginner": "Beginner",
    "settings.easy": "Easy",
    "settings.medium": "Medium", 
    "settings.hard": "Hard",
    "settings.expert": "Expert",
    "settings.beginnerDesc": "Perfect for learning chess basics and piece movement",
    "settings.mediumDesc": "Balanced gameplay with moderate tactical challenges",
    "settings.expertDesc": "Advanced strategic play with deep position analysis",
    "settings.recommendations": "Model Recommendations",
    "settings.recommendedFor": "Levels",
    "settings.recommended": "Recommended",
    "common.white": "White",
    "common.black": "Black",
    "game.wins": "Wins",
    "game.draw": "Draw",
    "game.gameOver": "Game Over",
    "game.check": "Check",
    "game.aiThinking": "AI is thinking",
    "game.reset": "Reset Game",
    "game.flipBoard": "Flip Board",
    "game.exportPGN": "Export PGN",
    "game.turn": "Turn",
    "game.difficulty": "Difficulty",
    "coach.welcome": "¡Hola! Soy tu entrenador de ajedrez IA. Puedo ayudarte a analizar posiciones, sugerir movimientos, explicar tácticas y responder cualquier pregunta de ajedrez que tengas. ¿En qué te gustaría trabajar?",
    "coach.chat.title": "Chat Entrenador IA",
    "coach.chat.subtitle": "Obtén orientación y análisis de ajedrez personalizados",
    "coach.chat.placeholder": "Pregunta sobre tácticas, estrategia, esta posición...",
    "coach.chat.help": "Presiona Enter para enviar • Pregunta sobre la posición actual o consejos generales de ajedrez",
  },
  de: {
    "chess.groq.coach": "Schach Groq Trainer",
    "ai.powered.training": "KI-gestütztes Training",
    "game.mode": "Spielmodus",
    "classic.vs": "Klassisch VS",
    "feedback": "Rückmeldung",
    "scoring": "Bewertung",
    "coach.mode": "Trainer-Modus",
    "game.active": "Spiel Aktiv",
    "move": "Zug",
    "reset.game": "Spiel Zurücksetzen",
    "download.pgn": "PGN Herunterladen",
    "you": "Sie",
    "groq.ai": "Groq KI",
    "white": "Weiß",
    "black": "Schwarz",
    "ai.analysis": "KI-Analyse",
    "chess.coach": "Schachtrainer",
    "move.history": "Zughistorie",
    "games.played": "Gespielte Partien",
    "win.rate": "Gewinnrate",
    "average.rating": "Durchschnittliche Bewertung",
    "last.move.analysis": "Analyse des Letzten Zugs",
    "move.score": "Zug-Bewertung",
    "ask.coach": "Fragen Sie Ihren Trainer...",
    "ai.thinking": "KI denkt nach...",
    "settings.title": "Settings",
    "settings.aiModel": "AI Model",
    "settings.selectModel": "Select AI Model",
    "settings.currentModel": "Current Model",
    "settings.difficulty": "Difficulty",
    "settings.difficultyLevel": "Difficulty Level",
    "settings.currentDifficulty": "Current Difficulty",
    "settings.beginner": "Beginner",
    "settings.easy": "Easy",
    "settings.medium": "Medium", 
    "settings.hard": "Hard",
    "settings.expert": "Expert",
    "settings.beginnerDesc": "Perfect for learning chess basics and piece movement",
    "settings.mediumDesc": "Balanced gameplay with moderate tactical challenges",
    "settings.expertDesc": "Advanced strategic play with deep position analysis",
    "settings.recommendations": "Model Recommendations",
    "settings.recommendedFor": "Levels",
    "settings.recommended": "Recommended",
    "common.white": "White",
    "common.black": "Black",
    "game.wins": "Wins",
    "game.draw": "Draw",
    "game.gameOver": "Game Over",
    "game.check": "Check",
    "game.aiThinking": "AI is thinking",
    "game.reset": "Reset Game",
    "game.flipBoard": "Flip Board",
    "game.exportPGN": "Export PGN",
    "game.turn": "Turn",
    "game.difficulty": "Difficulty",
    "coach.welcome": "Hallo! Ich bin Ihr KI-Schachtrainer. Ich kann Ihnen helfen, Positionen zu analysieren, Züge vorzuschlagen, Taktiken zu erklären und alle Ihre Schachfragen zu beantworten. Woran möchten Sie arbeiten?",
    "coach.chat.title": "KI-Trainer Chat",
    "coach.chat.subtitle": "Erhalten Sie personalisierte Schachberatung und -analyse",
    "coach.chat.placeholder": "Fragen Sie nach Taktiken, Strategie, dieser Position...",
    "coach.chat.help": "Enter drücken zum Senden • Fragen Sie nach der aktuellen Position oder allgemeinen Schachtipps",
  },
  tr: {
    "chess.groq.coach": "Satranç Groq Antrenörü",
    "ai.powered.training": "Yapay Zeka Destekli Eğitim",
    "game.mode": "Oyun Modu",
    "classic.vs": "Klasik VS",
    "feedback": "Geri Bildirim",
    "scoring": "Puanlama",
    "coach.mode": "Antrenör Modu",
    "game.active": "Oyun Aktif",
    "move": "Hamle",
    "reset.game": "Oyunu Sıfırla",
    "download.pgn": "PGN İndir",
    "you": "Sen",
    "groq.ai": "Groq Yapay Zeka",
    "white": "Beyaz",
    "black": "Siyah",
    "ai.analysis": "Yapay Zeka Analizi",
    "chess.coach": "Satranç Antrenörü",
    "move.history": "Hamle Geçmişi",
    "games.played": "Oynanan Oyunlar",
    "win.rate": "Kazanma Oranı",
    "average.rating": "Ortalama Puan",
    "last.move.analysis": "Son Hamle Analizi",
    "move.score": "Hamle Puanı",
    "ask.coach": "Antrenörünüze sorun...",
    "ai.thinking": "Yapay zeka düşünüyor...",
    "settings.title": "Settings",
    "settings.aiModel": "AI Model",
    "settings.selectModel": "Select AI Model",
    "settings.currentModel": "Current Model",
    "settings.difficulty": "Difficulty",
    "settings.difficultyLevel": "Difficulty Level",
    "settings.currentDifficulty": "Current Difficulty",
    "settings.beginner": "Beginner",
    "settings.easy": "Easy",
    "settings.medium": "Medium", 
    "settings.hard": "Hard",
    "settings.expert": "Expert",
    "settings.beginnerDesc": "Perfect for learning chess basics and piece movement",
    "settings.mediumDesc": "Balanced gameplay with moderate tactical challenges",
    "settings.expertDesc": "Advanced strategic play with deep position analysis",
    "settings.recommendations": "Model Recommendations",
    "settings.recommendedFor": "Levels",
    "settings.recommended": "Recommended",
    "common.white": "White",
    "common.black": "Black",
    "game.wins": "Wins",
    "game.draw": "Draw",
    "game.gameOver": "Game Over",
    "game.check": "Check",
    "game.aiThinking": "AI is thinking",
    "game.reset": "Reset Game",
    "game.flipBoard": "Flip Board",
    "game.exportPGN": "Export PGN",
    "game.turn": "Turn",
    "game.difficulty": "Difficulty",
    "coach.welcome": "Merhaba! Ben AI satranç antrenörünüzüm. Pozisyonları analiz etmenize, hamle önermenize, taktikleri açıklamanıza ve satranç sorularınızı yanıtlamanıza yardımcı olabilirim. Ne üzerinde çalışmak istersiniz?",
    "coach.chat.title": "AI Antrenör Sohbeti",
    "coach.chat.subtitle": "Kişiselleştirilmiş satranç rehberliği ve analizi alın",
    "coach.chat.placeholder": "Taktikler, strateji, bu pozisyon hakkında sorun...",
    "coach.chat.help": "Göndermek için Enter'a basın • Mevcut pozisyon veya genel satranç tavsiyeleri hakkında sorun",
  },
};

interface I18nContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const I18nContext = createContext<I18nContextType | undefined>(undefined);

export const I18nProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>(() => {
    return (localStorage.getItem("language") as Language) || "en";
  });

  useEffect(() => {
    localStorage.setItem("language", language);
  }, [language]);

  const t = (key: string): string => {
    return translations[language]?.[key as keyof typeof translations.en] || key;
  };

  return (
    <I18nContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </I18nContext.Provider>
  );
};

export function useI18n() {
  const context = useContext(I18nContext);
  if (!context) {
    throw new Error("useI18n must be used within an I18nProvider");
  }
  return context;
}